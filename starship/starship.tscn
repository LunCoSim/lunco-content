[gd_scene load_steps=12 format=3 uid="uid://exet76y0islr"]

[ext_resource type="Script" uid="uid://bbpvp5krmdepb" path="res://controllers/spacecraft/spacecraft-controller.gd" id="1_3y3t0"]
[ext_resource type="PackedScene" uid="uid://c81ry3343bcav" path="res://content/starship/source/SpaceX_Starship.fbx" id="1_qaffc"]
[ext_resource type="Script" uid="uid://brxvdg7je6xp4" path="res://content/starship/starship.gd" id="1_vljpq"]
[ext_resource type="Script" uid="uid://damt3q6qovubs" path="res://core/effectors/dynamic/thruster-effector.gd" id="2_thruster"]
[ext_resource type="PackedScene" uid="uid://co1mar6mmv7f1" path="res://core/models/rocket-plume/rocket-plume-2d.tscn" id="3_lsgpd"]
[ext_resource type="Script" uid="uid://cirjgs172jx8d" path="res://core/effectors/state/resource-tank-effector.gd" id="4_oxygen"]
[ext_resource type="Script" uid="uid://cirjgs172jx8d" path="res://core/effectors/state/resource-tank-effector.gd" id="5_methane"]
[ext_resource type="Script" path="res://core/effectors/dynamic/pump-effector.gd" id="6_fuel_pump"]
[ext_resource type="Script" path="res://core/effectors/dynamic/pump-effector.gd" id="7_ox_pump"]

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_k7qe3"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath(".:linear_velocity")
properties/2/spawn = false
properties/2/replication_mode = 1
properties/3/path = NodePath(".:angular_velocity")
properties/3/spawn = false
properties/3/replication_mode = 1
properties/4/path = NodePath(".:mass")
properties/4/spawn = true
properties/4/replication_mode = 2
properties/5/path = NodePath(".:thrust_input")
properties/5/spawn = true
properties/5/replication_mode = 1
properties/6/path = NodePath(".:torque_input")
properties/6/spawn = true
properties/6/replication_mode = 1

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_1adpw"]
radius = 5.44966
height = 52.6454

[node name="Starship" type="RigidBody3D"]
disable_mode = 2
script = ExtResource("1_vljpq")
metadata/_edit_group_ = true

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_k7qe3")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 4.23516e-22, -3.59989e-21, -4.37114e-08, -1, 0, 1, -4.37114e-08, -5.11591e-12, -5.11591e-12, 1.2668)
shape = SubResource("CapsuleShape3D_1adpw")

[node name="LCSpacecraftController" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 1.57356e-28, 1, 0, 0, 0)
script = ExtResource("1_3y3t0")

[node name="OxygenTank" type="Node3D" parent="."]
script = ExtResource("4_oxygen")
resource_id = "oxygen"
capacity = 1170000.0
tank_dry_mass = 50000.0
initial_fill_percentage = 100.0

[node name="MethaneTank" type="Node3D" parent="."]
script = ExtResource("5_methane")
resource_id = "methane"
capacity = 330000.0
tank_dry_mass = 15000.0
initial_fill_percentage = 100.0

[node name="FuelPump" type="Node3D" parent="."]
script = ExtResource("6_fuel_pump")
max_pressure = 500000.0
max_flow = 836.0
source_path = NodePath("../MethaneTank")
sink_path = NodePath("../RocketEngine")

[node name="OxidizerPump" type="Node3D" parent="."]
script = ExtResource("7_ox_pump")
max_pressure = 500000.0
max_flow = 3008.0
source_path = NodePath("../OxygenTank")
sink_path = NodePath("../RocketEngine")

[node name="RocketEngine" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 1.57356e-28, 1, -4.26326e-14, -4.26326e-14, -21.912)
visible = false
script = ExtResource("2_thruster")
max_thrust = 13200000.0
specific_impulse = 350.0
mixture_ratio = 3.6
fuel_tank_path = NodePath("../MethaneTank")
oxidizer_tank_path = NodePath("../OxygenTank")

[node name="RocketPlume" parent="RocketEngine" instance=ExtResource("3_lsgpd")]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 6, 2.58179, -0.263935, 0)

[node name="RocketPlume2" parent="RocketEngine" instance=ExtResource("3_lsgpd")]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 6, 0, 3.77902, 0)

[node name="RocketPlume3" parent="RocketEngine" instance=ExtResource("3_lsgpd")]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 6, -2.60748, -1.50283, 0)

[node name="Starship" parent="." instance=ExtResource("1_qaffc")]
process_mode = 1
transform = Transform3D(1.91069e-15, -4.37114e-08, -1, -1, -4.37114e-08, 0, -4.37114e-08, 1, -4.37114e-08, 0, 0, -22.4491)
